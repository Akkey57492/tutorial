# 環境構築
まず、Bot作成のための、環境を構築しましょう。<br>

## Visual Studio Codeのインストール
まずはVSCodeと呼ばれるコードエディタのインストールを行います。
<a href="https://code.visualstudio.com/download">ダウンロードサイト</a>から、VSCodeのWIndows版をダウンロードします。<br>
VSCodeのセットアップ用exeファイルがダウンロードされるので起動してください。<br>
起動したら、ソフトウェアの使用許諾契約に同意して、次へを押し続けてダウンロードしてください。<br>
![2021-09-24_11h27_25](https://user-images.githubusercontent.com/84906515/134609116-17184154-6c30-43f8-8672-f33aa2f79fc6.png)<br>
VSCodeはこれだけで簡単にダウンロードできます。

## Botの作成。
次に、Bot自体を作成する必要があります。<br>
<a href="https://discord.com/developers/applications">Discord Developer Portal</a>にアクセスしてください。<br>
次に、アプリケーションを追加します。<br>
「New Application」ボタンを押して名前を指定したら「Create」ボタンを押します。<br>
![2021-09-24_11h30_12](https://user-images.githubusercontent.com/84906515/134609332-6b3bb65f-59f8-4591-9f0c-896400084919.png)<br>
作成できたら、「APP ICON」のところでBotのアイコンを、「DESCRIPTION」のところでBotの自己紹介文を設定してください。<br>
一応このままでも続行は可能です。
![2021-09-24_11h31_15](https://user-images.githubusercontent.com/84906515/134609365-76fa38f1-4833-4178-ab05-1230270b6a67.png)<br>
次に、Botを追加します。<br>
メニューから「Bot」タブへ移動します。<br>
移動したら、「Add Bot」と言うボタンを押します。<br>
ボタンを押すと、ポップアップが出てきますので「Yes, do it!」というボタンを押します。
![2021-09-24_11h32_51](https://user-images.githubusercontent.com/84906515/134609531-274670f4-d373-403e-9d53-22f4a3765bf3.png)<br>
これでBotの作成が完了です。

## Botをテストサーバーに招待
Botをテストするために、今作ったBotをテストサーバーに入れましょう。<br>
Developer PortalのBotのタブから、「OAuth2」というタブに入りましょう。<br>
入ったら、下のほうに行って、「Bot」にチェックマークを付けます。<br>
マークを付けると、さらに下にチェック項目が出てくると思いますので、「Administrator」にチェックマークを付けます。<br>
チェックマークを付け終わったら、生成されたURLの欄にある「Copy」ボタンを押します。
![2021-09-24_11h36_30](https://user-images.githubusercontent.com/84906515/134609805-9ddb21a5-fdc7-46d1-b4c8-953ad6ad1b04.png)<br>
ボタンを押すと、Botの招待リンクがコピーされます。<br>
コピーされたら、ブラウザでURLをペーストして、アクセスします。<br>
アクセスすると、Botが導入できる状態になるので、テストサーバーを選んで導入してください。

## Tokenの取得と保管

### 警告
BotのTokenは絶対に信用していない方や知らない第3者に伝えないでください。<br>
Botが乗っ取られてしまう可能性があります。
<hr>
Botを動かすためにはTokenが必要です。<br>
Developer Portalで「Bot」のタブに移動します。<br>
移動したら、TOKENと書いてあるところにある「Copy」というボタンを押します。<br>
これでBotのTokenはコピーされました。
![2021-09-24_11h41_53](https://user-images.githubusercontent.com/84906515/134610156-d5d14d24-bd60-4448-939b-8b48db42ee46.png)<br>
コピーしたら、PCのどこかに保存してください。<br>
このTokenはBotを動かすことができるコードです。<br>
信用していなかったり、知らない第3者に絶対にTokenを教えないでください。<br>
場合によっては乗っ取られてしまいます。

# 開始
DiscordのBot開発には「discord.py」と言う、pythonのライブラリを使用します。

## 想定
このチュートリアルでは、すでにPython環境がインストールされていること前提です。<br>
そして、Botの動作確認ができる状態であること前提です。<br>
まだPythonをインストールしていない場合は<a href="https://techacademy.jp/magazine/15571">こちら</a>で方法を確認できます。<br>
Tokenの取得と動作確認ができる状況でない場合は<a href="https://cod-sushi.com/discord-py-token/">こちら</a>で環境を整える方法が確認できます。

## ライブラリインストール
コマンドプロンプトを管理者権限で実行します。<br>
実行後、コマンドを実行します。

```
pip install discord.py
```
基本的にこれだけで準備は完了です。

## 作業フォルダとファイル作成
Bot用の作業フォルダと、基本的なファイルを作成します。<br>
どこでもいいので、フォルダを作ります。<br>
作ったフォルダの中にmain.pyという拡張子がpyのファイルを作成します。<br>
今作成した、pyファイルにコードを書き込んでいきます。

## フレームワーク
開発には、ClientとCommandsを使う方法があります。<nr>
Clientでは基本的なイベントを受信して、処理することができます。<br>
Commandsではボットコマンドの処理を、簡単に処理することができます。<br>
最初は、Clientを利用する場合がほとんどです。<br>
(今回もClientを使用)

# コーディング
超基礎的な、コードを書いていきます。<br>
(Botを起動するだけのコード)

## サンプルコード
以下がサンプルコードです。
```py
import discord

client = discord.Client()

client.run("BotToken")
```
この3行のみで、Botの起動だけであれば可能です。

## import文
1行目の、import文です。
```py
import discord
```
これは、discord.pyライブラリをプログラム内で使うことを指します。<br>
これを行わないと、プログラム内で基本的にはライブラリの機能を利用することはできません。

## client変数定義
2行目の変数定義です。<br>
client変数に、discord.Client()のインスタンスを作成しています。<br>
インスタンスの詳細な説明は<a href="https://uxmilk.jp/39906">こちら</a>です。

### インスタンス
インスタンスの定義は、クラスの内容を変数に定義するということです。<br>
これで、クラス内の関数や変数の操作、呼び出しが非常に楽になります。

## run関数実行
3行目のrun関数です。<br>
run関数の第1引数に、BotのTokenを指定することで起動されます。
```py
client.run("ここにToken")
```
Tokenについては<a href="https://cod-sushi.com/discord-py-token/">こちら</a>をご確認ください。
  
# 起動
Botを起動する場合はコマンドで行います。<br>
pyファイルがあるフォルダにエクスプローラーでアクセスします。<br>
アクセスしたら、上の空白のバーをクリックして「cmd」と入力して実行します。
![2021-09-22_14h14_22](https://user-images.githubusercontent.com/84906515/134287045-f197e040-f6a5-4087-974e-d5910193361e.png)
黒い画面(コンソール)に
```
py main.py
```
と入力して実行すればpythonが実行されます。<br>
ちなみに、main.pyは自分のpyのファイル名に置き換えてください。<br>
起動して、Botがオンラインになれば成功です!

# Tokenの危険性
ほかの人にBotのTokenがばれるとそのBot自体が乗っ取られてしまいます。<br>
Tokenの管理には十分に注意してください。
